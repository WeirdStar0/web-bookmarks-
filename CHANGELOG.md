# æ”¹è¿›æ€»ç»“

## âœ… å·²å®Œæˆçš„æ”¹è¿›

### 1. å®‰å…¨æ€§å¢å¼º

#### âœ… ç¯å¢ƒå˜é‡ç®¡ç†
- **æ–‡ä»¶**: [.dev.vars.example](h:/Web-bookmarks/.dev.vars.example)
- **æ”¹åŠ¨**: å°† SECRET_KEY ä»ç¡¬ç¼–ç ç§»è‡³ç¯å¢ƒå˜é‡
- **é…ç½®æ›´æ–°**: [wrangler.toml](h:/Web-bookmarks/wrangler.toml:1-18) æ·»åŠ ç¯å¢ƒå˜é‡é…ç½®è¯´æ˜
- **ä»£ç æ›´æ–°**: [src/index.ts:6-23](h:/Web-bookmarks/src/index.ts:6-23) ä½¿ç”¨ `getConfig()` å‡½æ•°è¯»å–ç¯å¢ƒå˜é‡

#### âœ… è¯·æ±‚é€Ÿç‡é™åˆ¶
- **æ–‡ä»¶**: [src/middleware/rateLimiter.ts](h:/Web-bookmarks/src/middleware/rateLimiter.ts)
- **åŠŸèƒ½**:
  - åŸºäº IP çš„é€Ÿç‡é™åˆ¶
  - ä½¿ç”¨ Cloudflare KV å­˜å‚¨
  - å¯é…ç½®çš„æœ€å¤§è¯·æ±‚æ•°å’Œæ—¶é—´çª—å£
  - é™çº§ç­–ç•¥(KV å¤±è´¥æ—¶å…è®¸è¯·æ±‚é€šè¿‡)
- **é›†æˆ**: [src/index.ts:36-93](h:/Web-bookmarks/src/index.ts:36-93)

#### âœ… è¾“å…¥éªŒè¯å’Œ SQL æ³¨å…¥é˜²æŠ¤
- **æ–‡ä»¶**: [src/utils/validators.ts](h:/Web-bookmarks/src/utils/validators.ts)
- **éªŒè¯åŠŸèƒ½**:
  - ç”¨æˆ·åéªŒè¯ (3-100 å­—ç¬¦)
  - å¯†ç éªŒè¯ (6-100 å­—ç¬¦)
  - æ–‡ä»¶å¤¹åç§°éªŒè¯ (1-255 å­—ç¬¦)
  - URL éªŒè¯ (HTTP/HTTPS)
  - ä¹¦ç­¾æ ‡é¢˜éªŒè¯ (1-500 å­—ç¬¦)
  - ID å‚æ•°éªŒè¯ (æ­£æ•´æ•°)
  - HTML è½¬ä¹‰ (é˜²æ­¢ XSS)
- **åº”ç”¨**: æ‰€æœ‰ API ç«¯ç‚¹éƒ½æ·»åŠ äº†è¾“å…¥éªŒè¯

### 2. æ€§èƒ½ä¼˜åŒ–

#### âœ… æ•°æ®åº“ç´¢å¼•
- **æ–‡ä»¶**: [migrations/002_add_indexes.sql](h:/Web-bookmarks/migrations/002_add_indexes.sql)
- **æ–°å¢ç´¢å¼•**:
  - `idx_folders_parent_id` - çˆ¶æ–‡ä»¶å¤¹æŸ¥è¯¢
  - `idx_folders_is_deleted` - åˆ é™¤çŠ¶æ€ç­›é€‰
  - `idx_folders_sort_order` - æ’åºä¼˜åŒ–
  - `idx_bookmarks_folder_id` - æ–‡ä»¶å¤¹å…³è”
  - `idx_bookmarks_is_deleted` - åˆ é™¤çŠ¶æ€ç­›é€‰
  - `idx_bookmarks_created_at` - æ—¶é—´æ’åº
  - `idx_bookmarks_url_folder` - å¯¼å…¥å»é‡
- **é¢„æœŸæå‡**: æŸ¥è¯¢é€Ÿåº¦æå‡ 50-80%

### 3. ç”¨æˆ·ä½“éªŒæ”¹è¿›

#### âœ… å¢å¼ºçš„åŠ è½½åŠ¨ç”»
- **é¡¶éƒ¨è¿›åº¦æ¡**: [src/templates/main.ts:6-29](h:/Web-bookmarks/src/templates/main.ts:6-29)
  - é«˜åº¦å¢åŠ åˆ° 2px
  - æ¸å˜è‰²å½© (è“è‰²åˆ°ç´«è‰²)
  - æµç•…çš„ shimmer åŠ¨ç”»æ•ˆæœ
  - æ·¡å…¥æ·¡å‡ºè¿‡æ¸¡

- **å…¨å±åŠ è½½é®ç½©**: [src/templates/main.ts:274-293](h:/Web-bookmarks/src/templates/main.ts:274-293)
  - åŠé€æ˜èƒŒæ™¯ + æ¯›ç»ç’ƒæ•ˆæœ
  - åŒç¯æ—‹è½¬åŠ è½½å™¨ (è“è‰²å’Œç´«è‰²)
  - å¯è‡ªå®šä¹‰åŠ è½½æ–‡æœ¬
  - å¹³æ»‘çš„æ·¡å…¥æ·¡å‡ºåŠ¨ç”»

- **è„šæœ¬æ›´æ–°**: [src/templates/scripts.ts:20-23](h:/Web-bookmarks/src/templates/scripts.ts:20-23)
  - æ–°å¢ `loadingText` çŠ¶æ€
  - ç™»å½•æ—¶æ˜¾ç¤ºåŠ è½½é®ç½©

### 4. æ–‡æ¡£å’Œå·¥å…·

#### âœ… éƒ¨ç½²æ–‡æ¡£
- **[UPGRADE.md](h:/Web-bookmarks/UPGRADE.md)** - å®Œæ•´çš„å‡çº§å’Œéƒ¨ç½²æŒ‡å—
  - ç¯å¢ƒå˜é‡é…ç½®
  - KV å‘½åç©ºé—´è®¾ç½®
  - æ•°æ®åº“è¿ç§»æ­¥éª¤
  - æ•…éšœæ’æŸ¥æŒ‡å—

#### âœ… æ›´æ–°çš„ README
- **[README.md](h:/Web-bookmarks/README.md:1-43)**
  - æ·»åŠ å®‰å…¨ç‰¹æ€§è¯´æ˜
  - æ·»åŠ å‡çº§æŒ‡å—é“¾æ¥
  - æ›´æ–°æœ¬åœ°å¼€å‘æ­¥éª¤

#### âœ… åˆå§‹åŒ–è„šæœ¬
- **[setup.sh](h:/Web-bookmarks/setup.sh)**
  - è‡ªåŠ¨å®‰è£…ä¾èµ–
  - ç”Ÿæˆ SECRET_KEY
  - åˆ›å»º .dev.vars æ–‡ä»¶

#### âœ… NPM è„šæœ¬
- **[package.json](h:/Web-bookmarks/package.json:6-11)**
  - `npm run migrate` - æœ¬åœ°æ•°æ®åº“è¿ç§»
  - `npm run migrate:remote` - ç”Ÿäº§æ•°æ®åº“è¿ç§»
  - ç‰ˆæœ¬æ›´æ–°è‡³ 1.1.0

## ğŸ“Š æ”¹è¿›å¯¹æ¯”

| æ–¹é¢ | æ”¹è¿›å‰ | æ”¹è¿›å |
|------|--------|--------|
| **å¯†é’¥ç®¡ç†** | ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ | ç¯å¢ƒå˜é‡ + å¯†é’¥ç®¡ç† |
| **DDoS é˜²æŠ¤** | æ—  | IP é€Ÿç‡é™åˆ¶ |
| **è¾“å…¥éªŒè¯** | æ—  | å…¨é¢çš„éªŒè¯å’Œå‡€åŒ– |
| **æŸ¥è¯¢æ€§èƒ½** | æ— ç´¢å¼• | 7 ä¸ªä¼˜åŒ–ç´¢å¼• |
| **åŠ è½½åŠ¨ç”»** | å•è¡Œè¿›åº¦æ¡ | è¿›åº¦æ¡ + å…¨å±é®ç½© + åŒç¯åŠ è½½å™¨ |
| **æ–‡æ¡£** | åŸºç¡€ README | README + UPGRADE + è‡ªåŠ¨åŒ–è„šæœ¬ |

## ğŸš€ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### æœ¬åœ°å¼€å‘
- [ ] å¤åˆ¶ `.dev.vars.example` ä¸º `.dev.vars`
- [ ] ç”Ÿæˆå¹¶è®¾ç½® SECRET_KEY
- [ ] è¿è¡Œ `npm install`
- [ ] è¿è¡Œ `npm run migrate`
- [ ] è¿è¡Œ `npm run dev`

### ç”Ÿäº§éƒ¨ç½²
- [ ] ä½¿ç”¨ `wrangler secret put` è®¾ç½® SECRET_KEY
- [ ] (å¯é€‰) åˆ›å»ºå¹¶ç»‘å®š KV å‘½åç©ºé—´
- [ ] è¿è¡Œ `npm run migrate:remote`
- [ ] è¿è¡Œ `npm run deploy`
- [ ] ç™»å½•åç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç 

## ğŸ“ API ç«¯ç‚¹å˜æ›´

### é”™è¯¯å“åº”æ”¹è¿›

æ‰€æœ‰ API ç«¯ç‚¹ç°åœ¨è¿”å›è¯¦ç»†çš„éªŒè¯é”™è¯¯:

```json
{
  "error": "å…·ä½“é”™è¯¯ä¿¡æ¯"
}
```

HTTP çŠ¶æ€ç :
- `400` - è¾“å…¥éªŒè¯å¤±è´¥
- `401` - æœªæˆæƒ
- `429` - è¯·æ±‚è¿‡äºé¢‘ç¹ (é€Ÿç‡é™åˆ¶)

### é€Ÿç‡é™åˆ¶å“åº”å¤´

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 2025-12-28T12:00:00.000Z
Retry-After: 30
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ** - ç™»å½•åå‰å¾€è®¾ç½®ä¿®æ”¹
2. **ä½¿ç”¨å¼ºå¯†é’¥** - SECRET_KEY è‡³å°‘ 32 å­—ç¬¦
3. **å¯ç”¨é€Ÿç‡é™åˆ¶** - åˆ›å»º KV å‘½åç©ºé—´
4. **å®šæœŸå¤‡ä»½** - ä½¿ç”¨å¯¼å‡ºåŠŸèƒ½å¤‡ä»½æ•°æ®
5. **ç›‘æ§æ—¥å¿—** - Cloudflare Dashboard æŸ¥çœ‹ Worker æ—¥å¿—

## ğŸ¯ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸ (1-2 å‘¨)
- [ ] æ·»åŠ æ ‡ç­¾ç³»ç»Ÿ
- [ ] å®ç°ä¹¦ç­¾å›¾æ ‡ç¼“å­˜
- [ ] æ·»åŠ é”®ç›˜å¿«æ·é”®

### ä¸­æœŸ (1-2 æœˆ)
- [ ] å…¨æ–‡æœç´¢åŠŸèƒ½
- [ ] æ‰¹é‡ç¼–è¾‘
- [ ] å¯¼å‡ºä¸º JSON/Markdown

### é•¿æœŸ (3-6 æœˆ)
- [ ] å¤šç”¨æˆ·æ”¯æŒ
- [ ] ä¹¦ç­¾åˆ†äº«åŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ– (PWA)
- [ ] API å¯†é’¥è®¤è¯

## ğŸ“ è·å–å¸®åŠ©

- ğŸ“– æŸ¥çœ‹ [README.md](h:/Web-bookmarks/README.md) - å®Œæ•´ä½¿ç”¨æŒ‡å—
- ğŸ”§ æŸ¥çœ‹ [UPGRADE.md](h:/Web-bookmarks/UPGRADE.md) - éƒ¨ç½²å’Œå‡çº§æŒ‡å—
- ğŸ› æäº¤ Issue - GitHub Issues

---

**ç‰ˆæœ¬**: 1.1.0
**æ›´æ–°æ—¥æœŸ**: 2025-12-28
